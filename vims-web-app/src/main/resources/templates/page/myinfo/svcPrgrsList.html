<!-- Service Progress List Page -->
<div class="svc-progress-wrapper">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h2 class="page-title">[Page.Message].Message.Label.Array["SVCPRGRS.PAGE_TITLE"]</h2>
            <p class="page-subtitle">[Page.Message].Message.Label.Array["SVCPRGRS.PAGE_SUBTITLE"]</p>
        </div>

        <!-- Progress Flow Guide -->
        <div class="progress-flow-guide">
            <div class="flow-header">
                <i class="fa-solid fa-circle-info"></i>
                <span>[Page.Message].Message.Label.Array["SVCPRGRS.FLOW.GUIDE_TITLE"]</span>
            </div>
            <div class="flow-steps">
                <div class="flow-step">
                    <div class="step-icon draft">
                        <i class="fa-solid fa-file-pen"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-label">[Page.Message].Message.Label.Array["SVCPRGRS.STATUS.DRAFT"]</span>
                        <p class="step-desc">[Page.Message].Message.Label.Array["SVCPRGRS.FLOW.DRAFT_DESC"]</p>
                    </div>
                </div>
                <div class="flow-arrow"><i class="fa-solid fa-arrow-right"></i></div>
                <div class="flow-step">
                    <div class="step-icon submitted">
                        <i class="fa-solid fa-paper-plane"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-label">[Page.Message].Message.Label.Array["SVCPRGRS.STATUS.SUBMITTED"]</span>
                        <p class="step-desc">[Page.Message].Message.Label.Array["SVCPRGRS.FLOW.SUBMITTED_DESC"]</p>
                    </div>
                </div>
                <div class="flow-arrow"><i class="fa-solid fa-arrow-right"></i></div>
                <div class="flow-step">
                    <div class="step-icon review">
                        <i class="fa-solid fa-magnifying-glass-chart"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-label">[Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REVIEW"]</span>
                        <p class="step-desc">[Page.Message].Message.Label.Array["SVCPRGRS.FLOW.REVIEW_DESC"]</p>
                    </div>
                </div>
                <div class="flow-arrow"><i class="fa-solid fa-arrow-right"></i></div>
                <div class="flow-step final">
                    <div class="step-icon approved">
                        <i class="fa-solid fa-circle-check"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-label">[Page.Message].Message.Label.Array["SVCPRGRS.STATUS.APPROVED"]</span>
                        <p class="step-desc">[Page.Message].Message.Label.Array["SVCPRGRS.FLOW.APPROVED_DESC"]</p>
                    </div>
                    <span class="or-divider">/</span>
                    <div class="step-icon rejected">
                        <i class="fa-solid fa-circle-xmark"></i>
                    </div>
                    <div class="step-info">
                        <span class="step-label">[Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REJECTED"]</span>
                        <p class="step-desc">[Page.Message].Message.Label.Array["SVCPRGRS.FLOW.REJECTED_DESC"]</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <div class="filter-tabs">
                <button type="button" class="filter-tab active" data-filter="all">
                    [Page.Message].Message.Label.Array["SVCPRGRS.FILTER.ALL"]
                    <span class="count" id="countAll">0</span>
                </button>
                <button type="button" class="filter-tab" data-filter="draft">
                    [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.DRAFT"]
                    <span class="count" id="countDraft">0</span>
                </button>
                <button type="button" class="filter-tab" data-filter="submitted">
                    [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.SUBMITTED"]
                    <span class="count" id="countSubmitted">0</span>
                </button>
                <button type="button" class="filter-tab" data-filter="review">
                    [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REVIEW"]
                    <span class="count" id="countReview">0</span>
                </button>
                <button type="button" class="filter-tab" data-filter="approved">
                    [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.APPROVED"]
                    <span class="count" id="countApproved">0</span>
                </button>
                <button type="button" class="filter-tab" data-filter="rejected">
                    [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REJECTED"]
                    <span class="count" id="countRejected">0</span>
                </button>
            </div>
            <div class="search-box">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="searchInput"
                    placeholder='[Page.Message].Message.Label.Array["SVCPRGRS.SEARCH_PLACEHOLDER"]'>
            </div>
        </div>

        <!-- Progress List by Category -->
        <div class="progress-categories">
            <!-- 자동차 등록 -->
            <div class="category-section" data-category="car-reg">
                <div class="category-header">
                    <div class="category-icon reg">
                        <i class="fa-solid fa-car-side"></i>
                    </div>
                    <h3 class="category-title">[Page.Message].Message.Label.Array["SVCPRGRS.CAT.CAR_REG"]</h3>
                    <span class="category-count">0</span>
                    <button type="button" class="toggle-btn"><i class="fa-solid fa-chevron-down"></i></button>
                </div>
                <div class="category-body">
                    <!-- 등록 신청 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.REG_APPLY"]</h4>
                        <div class="progress-list" id="list-reg-apply">
                            <!-- Sample Items -->
                            <div class="progress-item" data-status="submitted">
                                <div class="item-left">
                                    <span
                                        class="item-badge new-reg">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.NEW_REG"]</span>
                                    <div class="item-info">
                                        <span class="item-title">12가 3456</span>
                                        <span class="item-date">2026-02-01 14:30</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag submitted">
                                        <i class="fa-solid fa-paper-plane"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.SUBMITTED"]
                                    </span>
                                    <button type="button" class="action-btn cancel" onclick="cancelRequest(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.CANCEL"]
                                    </button>
                                </div>
                            </div>
                            <div class="progress-item" data-status="review">
                                <div class="item-left">
                                    <span
                                        class="item-badge transfer-reg">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.TRANSFER_REG"]</span>
                                    <div class="item-info">
                                        <span class="item-title">34나 7890</span>
                                        <span class="item-date">2026-01-28 10:15</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag review">
                                        <i class="fa-solid fa-magnifying-glass-chart"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REVIEW"]
                                    </span>
                                </div>
                            </div>
                            <div class="progress-item" data-status="approved">
                                <div class="item-left">
                                    <span
                                        class="item-badge cancel-reg">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.CANCEL_REG"]</span>
                                    <div class="item-info">
                                        <span class="item-title">56다 1234</span>
                                        <span class="item-date">2026-01-20 09:00</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag approved">
                                        <i class="fa-solid fa-circle-check"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.APPROVED"]
                                    </span>
                                    <button type="button" class="action-btn view" onclick="viewDetail(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.VIEW"]
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 서비스 업무 신청 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.SVC_APPLY"]</h4>
                        <div class="progress-list" id="list-svc-apply">
                            <div class="progress-item" data-status="draft">
                                <div class="item-left">
                                    <span
                                        class="item-badge change-num">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.CHANGE_NUM"]</span>
                                    <div class="item-info">
                                        <span class="item-title">78라 5678</span>
                                        <span class="item-date">2026-02-04 08:45</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag draft">
                                        <i class="fa-solid fa-file-pen"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.DRAFT"]
                                    </span>
                                    <button type="button" class="action-btn edit" onclick="editRequest(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.EDIT"]
                                    </button>
                                    <button type="button" class="action-btn submit" onclick="submitRequest(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.SUBMIT"]
                                    </button>
                                </div>
                            </div>
                            <div class="progress-item" data-status="rejected">
                                <div class="item-left">
                                    <span
                                        class="item-badge reissue-plate">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.REISSUE_PLATE"]</span>
                                    <div class="item-info">
                                        <span class="item-title">90마 9012</span>
                                        <span class="item-date">2026-01-15 16:20</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag rejected">
                                        <i class="fa-solid fa-circle-xmark"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REJECTED"]
                                    </span>
                                    <button type="button" class="action-btn view" onclick="viewReason(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.VIEW_REASON"]
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 자동차 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.CAR"]</h4>
                        <div class="progress-list" id="list-car">
                            <div class="empty-list">
                                <i class="fa-solid fa-inbox"></i>
                                <p>[Page.Message].Message.Label.Array["SVCPRGRS.MSG.NO_ITEMS"]</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 자동차 검사 -->
            <div class="category-section" data-category="car-inspect">
                <div class="category-header">
                    <div class="category-icon inspect">
                        <i class="fa-solid fa-microscope"></i>
                    </div>
                    <h3 class="category-title">[Page.Message].Message.Label.Array["SVCPRGRS.CAT.CAR_INSPECT"]</h3>
                    <span class="category-count">0</span>
                    <button type="button" class="toggle-btn"><i class="fa-solid fa-chevron-down"></i></button>
                </div>
                <div class="category-body">
                    <!-- 검사예약 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.INSPECT_RESERVE"]
                        </h4>
                        <div class="progress-list" id="list-inspect-reserve">
                            <div class="progress-item" data-status="submitted">
                                <div class="item-left">
                                    <span
                                        class="item-badge regular-inspect">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.REGULAR_INSPECT"]</span>
                                    <div class="item-info">
                                        <span class="item-title">12가 3456 - Hyundai Sonata</span>
                                        <span class="item-date">2026-02-10 09:30</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag submitted">
                                        <i class="fa-solid fa-paper-plane"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.SUBMITTED"]
                                    </span>
                                    <button type="button" class="action-btn cancel" onclick="cancelRequest(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.CANCEL"]
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 튜닝 승인 신청 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.TUNING_APPLY"]
                        </h4>
                        <div class="progress-list" id="list-tuning">
                            <div class="empty-list">
                                <i class="fa-solid fa-inbox"></i>
                                <p>[Page.Message].Message.Label.Array["SVCPRGRS.MSG.NO_ITEMS"]</p>
                            </div>
                        </div>
                    </div>

                    <!-- 차대번호 표기 신청 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.CHASSIS_APPLY"]
                        </h4>
                        <div class="progress-list" id="list-chassis">
                            <div class="progress-item" data-status="approved">
                                <div class="item-left">
                                    <span
                                        class="item-badge new-chassis">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.NEW_CHASSIS"]</span>
                                    <div class="item-info">
                                        <span class="item-title">KMHXX00XXXX000001</span>
                                        <span class="item-date">2026-01-25 11:00</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag approved">
                                        <i class="fa-solid fa-circle-check"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.APPROVED"]
                                    </span>
                                    <button type="button" class="action-btn view" onclick="viewDetail(this)">
                                        [Page.Message].Message.Label.Array["SVCPRGRS.BTN.VIEW"]
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 자동차 정보 등록 -->
            <div class="category-section" data-category="car-info">
                <div class="category-header">
                    <div class="category-icon info">
                        <i class="fa-solid fa-file-import"></i>
                    </div>
                    <h3 class="category-title">[Page.Message].Message.Label.Array["SVCPRGRS.CAT.CAR_INFO_REG"]</h3>
                    <span class="category-count">0</span>
                    <button type="button" class="toggle-btn"><i class="fa-solid fa-chevron-down"></i></button>
                </div>
                <div class="category-body">
                    <!-- 수입차량 정보 등록 -->
                    <div class="subcategory">
                        <h4 class="subcategory-title">[Page.Message].Message.Label.Array["SVCPRGRS.SUB.IMPORT_REG"]</h4>
                        <div class="progress-list" id="list-import">
                            <div class="progress-item" data-status="review">
                                <div class="item-left">
                                    <span
                                        class="item-badge import-reg">[Page.Message].Message.Label.Array["SVCPRGRS.ITEM.IMPORT_REG"]</span>
                                    <div class="item-info">
                                        <span class="item-title">BMW 520d - WBAPH5C55BA000001</span>
                                        <span class="item-date">2026-02-02 15:45</span>
                                    </div>
                                </div>
                                <div class="item-right">
                                    <span class="status-tag review">
                                        <i class="fa-solid fa-magnifying-glass-chart"></i>
                                        [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.REVIEW"]
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Service Progress List Page Styles */
    .svc-progress-wrapper {
        background: var(--bg-main);
        padding: 100px 0 60px 0;
        margin-top: var(--header-height);
        min-height: calc(100vh - var(--header-height) - 200px);
    }

    .page-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .page-title {
        font-size: 32px;
        font-weight: 800;
        color: var(--text-main);
        margin-bottom: 12px;
    }

    .page-subtitle {
        font-size: 16px;
        color: var(--text-muted);
    }

    /* Progress Flow Guide */
    .progress-flow-guide {
        background: white;
        border-radius: var(--border-radius-lg);
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        padding: 28px;
        margin-bottom: 32px;
    }

    .flow-header {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 16px;
        font-weight: 700;
        color: var(--text-main);
        margin-bottom: 24px;
    }

    .flow-header i {
        color: var(--primary-color);
        font-size: 20px;
    }

    .flow-steps {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
    }

    .flow-step {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
        min-width: 150px;
    }

    .flow-step.final {
        flex: 2;
    }

    .step-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
    }

    .step-icon.draft {
        background: #f3f4f6;
        color: #6b7280;
    }

    .step-icon.submitted {
        background: #dbeafe;
        color: #2563eb;
    }

    .step-icon.review {
        background: #fef3c7;
        color: #d97706;
    }

    .step-icon.approved {
        background: #d1fae5;
        color: #059669;
    }

    .step-icon.rejected {
        background: #fee2e2;
        color: #dc2626;
    }

    .step-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .step-label {
        font-size: 14px;
        font-weight: 700;
        color: var(--text-main);
    }

    .step-desc {
        font-size: 12px;
        color: var(--text-muted);
        margin: 0;
    }

    .flow-arrow {
        color: #d1d5db;
        font-size: 16px;
        flex-shrink: 0;
    }

    .or-divider {
        font-size: 16px;
        color: #9ca3af;
        font-weight: 600;
        margin: 0 8px;
    }

    /* Filter Section */
    .filter-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        flex-wrap: wrap;
    }

    .filter-tabs {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }

    .filter-tab {
        padding: 10px 16px;
        border: 1px solid #e5e7eb;
        border-radius: 20px;
        background: white;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-muted);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.2s ease;
    }

    .filter-tab:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
    }

    .filter-tab.active {
        background: var(--primary-color);
        border-color: var(--primary-color);
        color: white;
    }

    .filter-tab .count {
        background: rgba(0, 0, 0, 0.1);
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 11px;
    }

    .filter-tab.active .count {
        background: rgba(255, 255, 255, 0.2);
    }

    .search-box {
        display: flex;
        align-items: center;
        gap: 12px;
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 10px 16px;
        min-width: 280px;
    }

    .search-box i {
        color: #9ca3af;
    }

    .search-box input {
        border: none;
        outline: none;
        flex: 1;
        font-size: 14px;
        color: var(--text-main);
    }

    /* Category Section */
    .progress-categories {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .category-section {
        background: white;
        border-radius: var(--border-radius-lg);
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        overflow: hidden;
    }

    .category-header {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 20px 24px;
        background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        cursor: pointer;
        transition: background 0.2s ease;
    }

    .category-header:hover {
        background: linear-gradient(135deg, #f5f6f7 0%, #fafbfc 100%);
    }

    .category-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        color: white;
    }

    .category-icon.reg {
        background: linear-gradient(135deg, var(--primary-color), #6366f1);
    }

    .category-icon.inspect {
        background: linear-gradient(135deg, #ff7b4d, #ff4500);
    }

    .category-icon.info {
        background: linear-gradient(135deg, #059669, #10b981);
    }

    .category-title {
        font-size: 17px;
        font-weight: 700;
        color: var(--text-main);
        flex: 1;
        margin: 0;
    }

    .category-count {
        background: var(--bg-soft);
        color: var(--text-muted);
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 13px;
        font-weight: 600;
    }

    .toggle-btn {
        width: 32px;
        height: 32px;
        border: none;
        background: transparent;
        color: var(--text-muted);
        cursor: pointer;
        transition: transform 0.3s ease;
    }

    .category-section.collapsed .toggle-btn {
        transform: rotate(-90deg);
    }

    .category-section.collapsed .category-body {
        display: none;
    }

    .category-body {
        padding: 20px 24px;
    }

    /* Subcategory */
    .subcategory {
        margin-bottom: 24px;
    }

    .subcategory:last-child {
        margin-bottom: 0;
    }

    .subcategory-title {
        font-size: 14px;
        font-weight: 700;
        color: var(--text-muted);
        margin: 0 0 12px 0;
        padding-left: 12px;
        border-left: 3px solid var(--primary-color);
    }

    /* Progress List */
    .progress-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .progress-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 20px;
        background: #fafbfc;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        transition: all 0.2s ease;
    }

    .progress-item:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 8px rgba(0, 118, 255, 0.08);
    }

    .item-left {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .item-badge {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 700;
        white-space: nowrap;
    }

    .item-badge.new-reg {
        background: #dbeafe;
        color: #1d4ed8;
    }

    .item-badge.transfer-reg {
        background: #d1fae5;
        color: #059669;
    }

    .item-badge.cancel-reg {
        background: #fee2e2;
        color: #dc2626;
    }

    .item-badge.change-num {
        background: #fef3c7;
        color: #d97706;
    }

    .item-badge.reissue-plate {
        background: #e0e7ff;
        color: #4f46e5;
    }

    .item-badge.regular-inspect {
        background: #dbeafe;
        color: #2563eb;
    }

    .item-badge.new-chassis {
        background: #d1fae5;
        color: #059669;
    }

    .item-badge.import-reg {
        background: #fce7f3;
        color: #db2777;
    }

    .item-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .item-title {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-main);
    }

    .item-date {
        font-size: 12px;
        color: var(--text-muted);
    }

    .item-right {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .status-tag {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 14px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 700;
    }

    .status-tag.draft {
        background: #f3f4f6;
        color: #6b7280;
    }

    .status-tag.submitted {
        background: #dbeafe;
        color: #2563eb;
    }

    .status-tag.review {
        background: #fef3c7;
        color: #d97706;
    }

    .status-tag.approved {
        background: #d1fae5;
        color: #059669;
    }

    .status-tag.rejected {
        background: #fee2e2;
        color: #dc2626;
    }

    .action-btn {
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
    }

    .action-btn.cancel {
        background: #fee2e2;
        color: #dc2626;
    }

    .action-btn.cancel:hover {
        background: #dc2626;
        color: white;
    }

    .action-btn.edit {
        background: #fef3c7;
        color: #d97706;
    }

    .action-btn.edit:hover {
        background: #d97706;
        color: white;
    }

    .action-btn.submit {
        background: var(--primary-color);
        color: white;
    }

    .action-btn.submit:hover {
        background: var(--primary-dark);
    }

    .action-btn.view {
        background: #e0e7ff;
        color: #4f46e5;
    }

    .action-btn.view:hover {
        background: #4f46e5;
        color: white;
    }

    /* Empty List */
    .empty-list {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-muted);
    }

    .empty-list i {
        font-size: 32px;
        margin-bottom: 12px;
        opacity: 0.5;
    }

    .empty-list p {
        margin: 0;
        font-size: 14px;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .flow-steps {
            flex-direction: column;
            gap: 16px;
        }

        .flow-arrow {
            transform: rotate(90deg);
            align-self: center;
        }

        .flow-step.final {
            flex-direction: column;
            align-items: flex-start;
        }

        .filter-section {
            flex-direction: column;
            align-items: stretch;
        }

        .filter-tabs {
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .search-box {
            min-width: 100%;
        }

        .progress-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 12px;
        }

        .item-right {
            width: 100%;
            justify-content: flex-end;
        }
    }
</style>

<script>
    $(document).ready(function () {
        initCategoryToggle();
        initFilterTabs();
        updateCounts();
    });

    function initCategoryToggle() {
        $('.category-header').on('click', function () {
            $(this).closest('.category-section').toggleClass('collapsed');
        });
    }

    function initFilterTabs() {
        $('.filter-tab').on('click', function () {
            $('.filter-tab').removeClass('active');
            $(this).addClass('active');

            const filter = $(this).data('filter');
            filterItems(filter);
        });
    }

    function filterItems(status) {
        if (status === 'all') {
            $('.progress-item').show();
        } else {
            $('.progress-item').hide();
            $(`.progress-item[data-status="${status}"]`).show();
        }
        updateCounts();
    }

    function updateCounts() {
        const counts = {
            all: $('.progress-item').length,
            draft: $('.progress-item[data-status="draft"]').length,
            submitted: $('.progress-item[data-status="submitted"]').length,
            review: $('.progress-item[data-status="review"]').length,
            approved: $('.progress-item[data-status="approved"]').length,
            rejected: $('.progress-item[data-status="rejected"]').length
        };

        $('#countAll').text(counts.all);
        $('#countDraft').text(counts.draft);
        $('#countSubmitted').text(counts.submitted);
        $('#countReview').text(counts.review);
        $('#countApproved').text(counts.approved);
        $('#countRejected').text(counts.rejected);

        // Update category counts
        $('.category-section').each(function () {
            const count = $(this).find('.progress-item:visible').length;
            $(this).find('.category-count').text(count);
        });
    }

    function cancelRequest(btn) {
        if (confirm('[Page.Message].Message.Label.Array["SVCPRGRS.MSG.CONFIRM_CANCEL"]')) {
            // TODO: Call cancel API
            $(btn).closest('.progress-item').fadeOut(300, function () {
                $(this).remove();
                updateCounts();
            });
        }
    }

    function editRequest(btn) {
        // TODO: Navigate to edit page
        formUtil.toast('Edit page will be opened', 'info');
    }

    function submitRequest(btn) {
        if (confirm('[Page.Message].Message.Label.Array["SVCPRGRS.MSG.CONFIRM_SUBMIT"]')) {
            // TODO: Call submit API
            const $item = $(btn).closest('.progress-item');
            $item.attr('data-status', 'submitted');
            $item.find('.status-tag').removeClass('draft').addClass('submitted')
                .html('<i class="fa-solid fa-paper-plane"></i> [Page.Message].Message.Label.Array["SVCPRGRS.STATUS.SUBMITTED"]');
            $item.find('.action-btn.edit, .action-btn.submit').remove();
            $item.find('.item-right').append('<button type="button" class="action-btn cancel" onclick="cancelRequest(this)">[Page.Message].Message.Label.Array["SVCPRGRS.BTN.CANCEL"]</button>');
            updateCounts();
        }
    }

    function viewDetail(btn) {
        // TODO: Navigate to detail page
        formUtil.toast('Detail page will be opened', 'info');
    }

    function viewReason(btn) {
        // TODO: Show rejection reason popup
        formUtil.toast('Rejection Reason: [Sample] Document verification failed', 'error');
    }
</script>