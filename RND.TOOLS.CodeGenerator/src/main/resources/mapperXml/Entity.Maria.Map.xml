<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="entity">
	<select id="SELECT.ENTITY" parameterClass="java.lang.String" resultClass="java.util.HashMap">
		SELECT
			c.TABLE_NAME AS table_name,
			t.TABLE_COMMENT AS table_comments,
			c.COLUMN_NAME AS column_name,
			c.COLUMN_COMMENT AS column_comments,
			c.DATA_TYPE AS column_type,
			c.CHARACTER_MAXIMUM_LENGTH AS column_length,
			CASE WHEN s.COLUMN_NAME IS NOT NULL THEN 'true' ELSE 'false' END AS column_key,
			c.IS_NULLABLE AS column_nullable,
			c.COLUMN_DEFAULT AS column_default
		FROM
			INFORMATION_SCHEMA.COLUMNS c
				JOIN INFORMATION_SCHEMA.TABLES t
					 ON c.TABLE_SCHEMA = t.TABLE_SCHEMA
						 AND c.TABLE_NAME = t.TABLE_NAME
				LEFT JOIN (
				SELECT DISTINCT TABLE_SCHEMA, TABLE_NAME, COLUMN_NAME
				FROM INFORMATION_SCHEMA.STATISTICS
			) s
						  ON c.TABLE_SCHEMA = s.TABLE_SCHEMA
							  AND c.TABLE_NAME = s.TABLE_NAME
							  AND c.COLUMN_NAME = s.COLUMN_NAME
		WHERE
			c.TABLE_NAME = #productcode#
		ORDER BY
			c.TABLE_NAME,
			c.ORDINAL_POSITION,
			c.COLUMN_NAME
	</select>
</sqlMap>
